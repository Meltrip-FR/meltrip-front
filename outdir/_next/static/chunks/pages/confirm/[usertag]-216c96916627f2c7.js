(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{5030:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/confirm/[usertag]",function(){return t(1518)}])},1518:function(e,n,t){"use strict";t.r(n);var r=t(4051),o=t.n(r),c=t(5893),u=t(6410),a=t(2817),i=t(9669),s=t.n(i),f=t(1163),l=t(7294),p=t(3344);function h(e,n,t,r,o,c,u){try{var a=e[c](u),i=a.value}catch(s){return void t(s)}a.done?n(i):Promise.resolve(i).then(r,o)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function u(e){h(c,r,o,u,a,"next",e)}function a(e){h(c,r,o,u,a,"throw",e)}u(void 0)}))}}function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){v(e,n,t[n])}))}return e}n.default=function(){var e=(0,f.useRouter)(),n=(0,u.T)(),t=(0,l.useState)(!1),r=t[0],i=t[1],h=e.query.usertag,v=function(){var t=d(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("OK"),i(!0),!h){t.next=8;break}return console.log("USERTAG"),t.next=6,s().get("".concat("http://localhost:4545","/user/").concat(h,"/tag"));case 6:null===(r=t.sent.data).confirmEmail?s().put("".concat("http://localhost:4545","/user/confirm/").concat(r.id),{confirmEmail:!0}).then(function(){var t=d(o().mark((function t(c){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete r.createdAt,delete r.deletedAt,delete r.updatedAt,n((0,a.x4)({login:!0,user:w({},r,{roles:["user"]})})),i(!1),e.push("/user/dashboard");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.error(e.response.data.message)})):(n((0,a.kS)()),i(!1),e.push("/"));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,l.useEffect)((function(){v().catch((function(e){return console.error(e)}))}),[h]),(0,c.jsx)(p.default,{children:(0,c.jsx)("h1",{children:r&&"Loading..."})})}}},function(e){e.O(0,[927,669,344,774,888,179],(function(){return n=5030,e(e.s=n);var n}));var n=e.O();_N_E=n}]);